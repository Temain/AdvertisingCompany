<div data-bind="visible: isInitialized">
    <ol class="breadcrumb">
        <li>CRM</li>
        <li class="active">Отчёты</li>
    </ol>
    <div>
        <h1 class="page-title">
            Фотоотчёты<br />
            <small data-bind="visible: addressId, text : 'Адрес: г.Краснодар ' + addressName()"></small>
            <small data-bind="visible: campaignId, text : 'Клиент: ' + clientName()"></small>
        </h1>
    </div>

    <div class="clearfix mb-lg" data-bind="visible: addressId && addressReports().length > 0">
        <div class="btn-group m-b-20 js-filter-options">
            <span class="btn btn-default filter active" data-group="all">Июль</span>
            <span class="btn btn-default filter" data-group="nature">Июнь</span>
            <span class="btn btn-default filter" data-group="people">Май</span>
            <span class="btn btn-default filter" data-group="space">Апрель</span>
        </div>
        <div class="pull-right m-b-20">
            <div class="btn-group js-sort-options">
                <span class="btn btn-default sort active" data-sort-order="asc"><i class="fa fa-sort-numeric-asc"></i></span>
                <span class="btn btn-default sort" data-sort-order="desc"><i class="fa fa-sort-numeric-desc"></i></span>
            </div>
        </div>
    </div>

    <div class="alert alert-info" role="alert" data-bind="visible: addressReports().length == 0">
        Не загружено ни одного фотоотчёта.
    </div>

    <div class="row gallery shuffle" id="grid" data-bind="visible: addressReports().length > 0">
        <!-- ko foreach: addressReports -->

        <div class="col-sm-4 col-md-3 gallery-item shuffle-item filtered" data-groups="[&quot;nature&quot;]" data-title="Mountains">
            <div class="thumbnail">
                <a data-bind="attr: { href: '/api/admin/reports/' + addressReportId() }"><img data-bind="attr: { src: 'data:' + imageMimeType() + ';base64,' + imageThumbnail() }" alt="..."></a>
                <div class="caption">
                    <h5 class="mt-0 mb-xs display-inline-block" data-bind="text: imageName"></h5>
                    <div class="remove" style="display: inline-block;"><a href="#" data-bind="tooltip: { title: 'Удалить', placement: 'bottom', trigger: 'hover' }, click : $parent.showDeleteModal"><i class="fa fa-trash-o" aria-hidden="true"></i></a></div>
                    <ul class="post-links">
                        <li><a>Дата : <span data-bind="text: reportDate"></span></a></li>
                        <li><a>Размер : <span data-bind="text: filesize(imageLength(), {base: 10, round: 0})"></span></a></li>
                    </ul>
                    <ul class="post-links" data-bind="visible: comment">
                        <li><a>Комментарий : </a><span data-bind="text : comment"></span></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- /ko -->
        <div class="col-sm-4 col-md-3 js-shuffle-sizer"></div>
    </div>
</div>

<!-- Delete modal -->
<div id="delete-popup" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h2>Удаление</h2>
            </div>
            <div class="modal-body">
                <div data-bind="if: selectedReport() != null">
                    Вы действительно хотите удалить файл
                    <span data-bind="text: selectedReport().imageName()"></span>?
                </div>
            </div>
            <div class="modal-footer">
                <div class="row mrgtop12">
                    <div class="col-sm-offset-4 col-sm-8">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>&nbsp;Отмена</button>
                        <button type="submit" class="btn btn-danger" data-bind="click: deleteReport"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span>&nbsp;Удалить</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>